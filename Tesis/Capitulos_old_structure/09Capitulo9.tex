%---------------------------------------------------------------------
%
%                          Capítulo 9
%
%---------------------------------------------------------------------

\chapter{Tamaño de ventana}
\label{capTamVen}
	
\begin{resumen}
En los capítulos anteriores se fijó la variable tamaño de ventana en 300 ms. En este capítulo se estudiará el impacto de variar dicho tamaño.
\end{resumen}

%-------------------------------------------------------------------
\section{Introducción}
\label{capTamVen:sec:introduccion}

Se desea estudiar que impacto tiene variar el tamaño de ventana y como afecta en la clasificación. \\
A su vez, se quiere encontrar con qué velocidad de respuesta se podría diferenciar un tono GOc de uno NOGOc.\\
En este capítulo se observará la variación de la performance en función al tamaño y como esto es útil para indicar cuantos milisegundos se deben esperar para poder obtener una clasificación.

\section{ Exploración de tamaños }
\label{capTamVen:sec:windowsvariation}

Dado que el tono ocurre en el milisegundo $4000$, se ampliará paulatinamente el tamaño de ventana desde ese instante y se buscará cuál es el mínimo tamaño que resulta en una performance aceptable. \\

Se entrenó a \textit{Random Forest}, por ser el método que mejores resultados tuvo y porque además es un método robusto al ruido \citep{breiman2001random}, lo que permitirá que los primeros milisegundos, no afecten demasiado la clasificación de las ventanas a medida que se amplian en el tiempo.

\figura{Bitmap/09/window_change_from_4000_RF}{width=1\linewidth}{capTamVen:fig:windowChange4000RF}%
{Random Forest - Gráfico de la performance en función al tamaño de ventana, desde el milisegundo $4000$ - $500$ corridas}

La figura~\ref{capTamVen:fig:windowChange4000RF} permite observar el crecimiento a medida que se aumenta el tamaño de ventana a lo largo del tiempo, del milisegundo $4000$ en adelante.
Para apreciar mejor los resultados se realizará un grafico de barras mostrando el rendimiento en cada ventana, aumentando de a $100 ms$ la amplitud de las mismas.

\figura{Bitmap/09/window_change_from_4000_bar_RF}{width=1\linewidth}{capTamVen:fig:windowChange4000BarRF}%
{Random Forest - Gráfico en barras de la performance en función al tamaño de ventana, desde el milisegundo $4000$ - $500$ corridas}
\figura{Bitmap/09/window_change_from_4000_bar_zoom_RF}{width=1\linewidth}{capTamVen:fig:windowChange4000BarZoomRF}%
{Random Forest - Gráfico en barras de la performance en función al tamaño de ventana, desde el milisegundo $4000$ - $500$ corridas - primeras $20$ ventanas}
  
 En la figura~\ref{capTamVen:fig:windowChange4000BarRF} se aprecia como a partir de la amplitud $1800 ms$ la clasificación es perfecta.
 La figura~\ref{capTamVen:fig:windowChange4000BarZoomRF} muestra una ventana pintada de magenta, con $700 ms$ de amplitud. A partir de esta ventana la performance se mantiene por encima de $0.94\pm0.05$.\\ 
 La ventana pintada de rojo ($1100 ms$ de amplitud) indica que la performance se mantendrá por encima de $0.98\pm0.03$ para todo el resto de las amplitudes.\\\\
 
 Conocer el menor tamaño de ventana que se necesita para obtener cierta performance es importante debido a que un tamaño de ventana mas chico implica una respuesta más rápida ante el problema de decidir posteriormente a haberle mostrado el tono a la rata si la misma sacará o no la lengua.\\\\
 
 Se pretende entonces saber si la performance obtenida es debido a utilizar un tamaño de ventana determinado o si simplemente se debe al avance en el tiempo de las mismas. En otras palabras, se desea averiguar si se pueden obtener resultados similares con un tamaño de ventana mas pequeño que posea los últimos milisegundos de una ventana mas grande. \\
 Se graficó con dicho proposito la performance de las ventanas obtenidas con \textit{Random Forest} para la ventana de tamaño $300 ms$, haciendo coincidir el final de las ventanas del gráfico~\ref{capTamVen:fig:windowChange4000BarRF} con el final de las ventanas de tamaño $300 ms$.

\figura{Bitmap/09/window_change_300_bar_RF}{width=1\linewidth}{capTamVen:fig:windowChange300BarRF}%
{Random Forest - Gráfico en barras de la performance en función a la ventana, cada ventana posee $300 ms$ - $500$ corridas}
\figura{Bitmap/09/window_change_300_bar_zoom_RF}{width=1\linewidth}{capTamVen:fig:windowChange300BarZoomRF}%
{Random Forest - Gráfico en barras de la performance en función a la ventana, cada ventana posee $300 ms$ - $500$ corridas - primeras $20$ ventanas}

En la figura ~\ref{capTamVen:fig:windowChange300BarZoomRF} se observan cuatro ventanas pintadas. Las coloreadas con magenta y rojo representan las ventanas de $700 ms$ y $1100 ms$ de la figura~\ref{capTamVen:fig:windowChange4000BarZoomRF}. La ventana pintada de amarillo indica el punto donde la performance se mantiene por encima de $0.94\pm0.05$, asi como la ventana pintada de verde indica que la performance se mantendrá por encima de $0.98\pm0.03$ para todo el resto de las amplitudes. Tomando de a 3$00 ms$, se necesitan $200 ms$ mas para poder garantizar las condiciones planteadas anteriormente.
La figura~\ref{capTamVen:fig:windowChange300BarRF} es similar a la figura~\ref{capTamVen:fig:windowChange4000BarRF}, a pesar que se aprecian algunas pequeñas fluctuaciones en los últimos milisegundos de la figura~\ref{capTamVen:fig:windowChange300BarRF} que no se perciben en la otra. Se puede observar mejor en la figura~\ref{capTamVen:fig:windowVersusRF}.

\figura{Bitmap/09/window_vs_RF}{width=1\linewidth}{capTamVen:fig:windowVersusRF}%
{Random Forest - Ventana de tamaño fijo en $300 ms$ (Verde) vs Ventana ampliándose a medida que avanza el tiempo (Rojo).}

Los desvíos de ambas figuras se solapan durante casi todo el tiempo, con lo cual se puede inferir que siempre que el tamaño de ventana sea mayor a $300 ms$, y usando \textit{Random Forest} como método de clasificación, la performance no variará significativamente con el tamaño de ventana.\\\\

Queda por estudiar entonces cuanto se puede achicar el tamaño de ventana sin perder performance de clasificación.\\
No se explayará este tema ya que carece de relevancia, debido a que $300 ms$ no es una gran amplitud de ventana y a su vez no aporta información respecto a la velocidad con la cual se pueden separar los ensayos.

\section{ Conclusión }
\label{capTamVen:sec:conclusion}

A partir que el tono es enseñado a la rata, se deben esperar $700$ ms antes de poder clasificar con una performance de $0.94\pm0.05$ y $1100 ms$ para garantizar una performance mayor a $0.98\pm0.03$, siempre clasificando con \textit{Random Forest} entrenado con los parametros especificados en el Capítulo~\ref{capIterResult:sec:Análisis con Random Forest}.\\
Se aconseja entrenar el clasificador con todos los datos disponibles a partir del tono, para evitar fluctuaciones, como observamos en el gráfico~\ref{capTamVen:fig:windowVersusRF}. 

